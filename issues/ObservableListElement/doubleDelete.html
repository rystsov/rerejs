<html>
<head>
    <script src="../rere.closure.js"></script>
</head>
<body>
<div id="canvas"></div>
</body>
<script type="text/javascript">
    var renderer = rere.ui.renderer;
    var Variable = rere.reactive.Variable;
    var ObservableList = rere.reactive.ObservableList;
    var H = renderer.h;

    var items = new ObservableList([]);

    renderer.render(canvas, H(items.list.bind(function(list){
        if (list.length==0) return new Variable();
        return new Variable(items);
    }).lift(function(list){
        return H(["table",
            H(list.lift(function(item){
                return H(["tr",
                    ["td", item.name]
                ]);
            }))
        ]);
    })));

    var id;
    items.add(function(key){
        id = key;
        return {key: "" + key, name:"Lisa"};
    });
    items.remove(id);
    items.add(function(key){
        id = key;
        return {key: "" + key, name:"Denis"};
    });
    items.remove(id);
</script>
</html>
