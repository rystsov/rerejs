<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Wapr9 / Accidental memory leaks / ReactiveCoffee</title>

    <link href="../../../lib/bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="../../../lib/highlight.js/styles/default.css" rel="stylesheet" >
    <link href="../../../css/common.css" rel="stylesheet">
    <link href="leak.css" rel="stylesheet">
</head>

<body>

<div class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <a class="navbar-brand" href="../../../index.html">WARP9</a>
        </div>
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li><a href="../../about.html">About</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Competitor analysis <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="../matrix.html">Matrix</a></li>
                        <li class="divider"></li>
                        <li><a href="leaks.html">Accidental memory leaks</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Examples <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="../../../examples/todomvc/todomvc.html">TodoMVC</a></li>
                    </ul>
                </li>
                <li><a href="../../download.html">Download</a></li>
                <li><a href="https://github.com/rystsov/warp9">Sources</a></li>
            </ul>
        </div>
    </div>
</div>

<div class="container">
    <!-- Main component for a primary marketing message or call to action -->
    <div class="jumbotron">
        <h1>Accidental memory leaks</h1>
        <p>
            Simple ReactiveCoffee app leaks as well as Knockout version.
            Moreover due to its internal design it leaks pretty fast and just like knockout app it
            doesn't look suspicious at all.
        </p>
        <p>
            <a class="btn btn-lg btn-primary btn-info" href="leaks.html">Details</a>
            <a class="btn btn-lg btn-primary" href="knockout.html">Knockout</a>
            <a class="btn btn-lg btn-primary btn-warning" href="reactive_coffee.html">Reactive Coffee</a>
            <a class="btn btn-lg btn-primary" href="warp9.html">Warp9</a>
        </p>
    </div>
</div>

<div class="container">
    <div class="starter-template">
        <div class="row">
            <div class="col-md-6">
                <div class="app">
                    <p>
                        This app leaks incredible fast: click several times on 'add'
                        button, few times on 'inc' button and then on 'clear' button and repeat the process.
                        You'll see that the number of subscriptions only increases and does it fast.
                    </p>
                    <div class="coffee"></div>
                </div>
            </div>
            <div class="col-md-6">
                <p>CoffeeScript</p>
                <pre><code>bind = rx.bind
rxt.importTags()

adds = 0
handlers = rx.cell(0)
driver = rx.cell(0)
items = rx.array()

clear = (list) ->
  while list.raw().length!=0
    list.remove(list.raw()[0])

$ ->
  $('.coffee').prepend(
    div [
      div bind -> ["Number of subscriptions to 'driver': #{handlers.get()}"]
      div [
        button {
          click: ->
            driver.set(driver.get()+1)
            handlers.set(driver.onSet.subs.length)
        }, "inc"
        button {
          click: ->
            offset = adds++
            item = bind -> driver.get() + offset
            items.push(item)
            handlers.set(driver.onSet.subs.length)
        }, "add"
        button {
          click: ->
            clear(items)
            handlers.set(driver.onSet.subs.length)
        }, "clear"
        div items.map (item) ->
          div bind -> ["#{item.get()}"]
      ]
    ]
  )</code></pre>
            </div>
        </div>
    </div>
</div>


<script src="../../../lib/jquery/jquery-2.0.3.min.js"></script>
<script src="../../../lib/bootstrap/js/bootstrap.min.js"></script>
<script src="../../../lib/highlight.js/highlight.pack.js"></script>
<script src="../../../lib/underscore-min.js"></script>
<script src="../../../lib/reactive-coffee-0.5/reactive-coffee.js"></script>
<script src="reactive.js"></script>

</body>
</html>
