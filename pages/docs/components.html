<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Wapr9 / Docs / Components</title>

    <link href="../../lib/highlight.js/styles/default.css" rel="stylesheet" >
    <script src="../../lib/highlight.js/highlight.pack.js"></script>

    <!-- Bootstrap core CSS -->
    <link href="../../lib/bootstrap/css/bootstrap.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="../../css/common.css" rel="stylesheet">
    <link href="../../css/docs.css" rel="stylesheet">
</head>

<body>

<div class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <a class="navbar-brand" href="../../index.html">WARP9</a>
        </div>
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li><a href="docs.html">Docs</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Competitor analysis <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="../competitors/matrix.html">Matrix</a></li>
                        <li class="divider"></li>
                        <li><a href="../competitors/leaks/leaks.html">Accidental memory leaks</a></li>
                        <li><a href="../competitors/diamond/diamond.html">Repeated diamonds shape</a></li>
                        <li><a href="../competitors/consistency/consistency.html">Atomic updates</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Examples <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li><a href="../../examples/todomvc/todomvc.html">TodoMVC</a></li>
                    </ul>
                </li>
                <li><a href="../download.html">Download</a></li>
                <li><a href="https://github.com/rystsov/warp9">Sources</a></li>
                <li><a href="https://groups.google.com/group/warp9">Forum</a></li>
            </ul>
        </div>
    </div>
</div>

<div id="docs" class="container">
    <div class="row">
        <div class="col-md-3">
            <ul class="nav nav-pills nav-stacked">
                <li><a href="docs.html">Basic idea</a></li>
                <li><a href="reactive_primitives.html">Reactive primitives</a></li>
                <li><a href="markup.html">Markup</a></li>
                <li class="active"><a href="components.html">Components</a></li>
                <li><a href="custom_tags.html">Custom tags</a></li>
            </ul>
        </div>
        <div class="col-md-9">
            <h3>Components</h3>

            <p>
                The simplest way to extract something into a component for reusing is to extract is to a
                function as it was done with TodoMVC example (<a href="https://github.com/rystsov/warp9/blob/gh-pages/examples/todomvc/todomvc.html">sources</a>):
            </p>
            <pre><code>function tabSwitch(tabName) {
    return ["a", {
        "href": "#/" + tabName, "class": activeTab.when(tabName, "selected")
    }, tabName];
}</code></pre>

            <p>
                Sometimes it is needed to subscribe to a reactive variable inside a component, but we
                know that it leads to memory leaks if we don't remove the subscription. Usually the best
                moment to remove it is the moment when the component is removed from the screen, so we need a
                callback that notifies us. For this propose we can use <code>warp9.ui.Component</code>. Lets
                rewrite <code>tabSwitch</code> to use it
            </p>

            <pre><code>function tabSwitch(tabName) {
    return new Component(function(){
        this.dispose = function(){
            // place to get rid of subscription
            console.info("The component is removed.");
        };

        return ["a", {
            "href": "#/" + tabName, "class": activeTab.when(tabName, "selected")
        }, tabName];
    });
}</code></pre>

            <p>
                This example is far-fetched (we don't have a subscription to remove), but in the
                <a href="https://github.com/rystsov/warp9/blob/gh-pages/examples/todomvc/todomvc.html">TodoMVC sources</a>
                you'll find a real world usage.
            </p>

            <p>
                Also you can encapsulate your control to <a href="custom_tags.html">custom tag</a>.
            </p>
        </div>
    </div>
</div>


<script src="../../lib/jquery/jquery-2.0.3.min.js"></script>
<script src="../../lib/bootstrap/js/bootstrap.min.js"></script>
<script language="JavaScript">
    hljs.initHighlightingOnLoad();
</script>
</body>
</html>
